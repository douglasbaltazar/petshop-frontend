<p-confirmDialog></p-confirmDialog>
<div class="dashboard">
  <div class="header">
    <h1>Clientes</h1>
    <p-button
      label="Cadastre um Novo"
      icon="fa-solid fa-plus"
      severity="primary"
      (click)="cadastrar()"
    ></p-button>
  </div>
  <div class="card">
    <p-table
      [value]="items"
      [paginator]="true"
      [rows]="5"
      [tableStyle]="{ 'min-width': '50rem' }"
      [rowsPerPageOptions]="[5, 10, 20]"
      [expandedRowKeys]="expandedRows"
      dataKey="id"
      (onRowExpand)="onRowExpand($event)"
      (onRowCollapse)="onRowCollapse($event)"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 5rem"></th>
          <th style="text-align: center">ID</th>
          <th style="text-align: center">Nome</th>
          <th style="text-align: center">CPF</th>
          <th style="text-align: center">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-expanded="expanded">
        <tr>
          <td>
            <p-button
              type="button"
              pRipple
              [pRowToggler]="item"
              [text]="true"
              [rounded]="true"
              [plain]="true"
              [icon]="expanded ? 'fa-solid fa-chevron-down' : 'fa-solid fa-chevron-right'"
            />
          </td>
          <td class="text-align">{{ item.id }}</td>
          <td class="text-align">{{ item.nome }}</td>
          <td class="text-align">{{ item.cpf }}</td>
          <td class="text-align btn-wrapper">
            <p-button
              icon="fa-solid fa-pen"
              severity="success"
              (click)="editar(item.id)"
            />
            <p-button
              icon="fa-solid fa-remove"
              severity="danger"
              (onClick)="deleteItem(item)"
            />
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5">Não há dados.</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="rowexpansion" let-product>
        <tr>
          <td colspan="7">
            <div class="p-3">
              <p-table [value]="product.orders" dataKey="id">
                <ng-template pTemplate="header">
                  <tr>
                    <th pSortableColumn="id">
                      Id <p-sortIcon field="price" />
                    </th>
                    <th pSortableColumn="customer">
                      Customer <p-sortIcon field="customer" />
                    </th>
                    <th pSortableColumn="date">
                      Date <p-sortIcon field="date" />
                    </th>
                    <th pSortableColumn="amount">
                      Amount <p-sortIcon field="amount" />
                    </th>
                    <th pSortableColumn="status">
                      Status <p-sortIcon field="status" />
                    </th>
                    <th style="width: 4rem"></th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-order>
                  <tr>
                    <td>{{ order.id }}</td>
                    <td>{{ order.customer }}</td>
                    <td>{{ order.date }}</td>
                    <td><p-button type="button" icon="pi pi-search" /></td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="6">
                      There are no order for this product yet.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
